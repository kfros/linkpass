{
  "id": "b4e8744c-f8a0-4b3b-9a04-c9ff30d22140",
  "prevId": "626a86e5-259c-4d2a-add7-fb1d05ac2498",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.app_events": {
      "name": "app_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "ts": {
          "name": "ts",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "customer_id": {
          "name": "customer_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "event": {
          "name": "event",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "props": {
          "name": "props",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "ix_app_events_ts": {
          "name": "ix_app_events_ts",
          "columns": [
            {
              "expression": "ts",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_app_events_merchant": {
          "name": "ix_app_events_merchant",
          "columns": [
            {
              "expression": "merchant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chain_bindings": {
      "name": "chain_bindings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "pass_id": {
          "name": "pass_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "chain": {
          "name": "chain",
          "type": "varchar(16)",
          "primaryKey": false,
          "notNull": true
        },
        "asset_id": {
          "name": "asset_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_chain_bindings_pass_chain": {
          "name": "ux_chain_bindings_pass_chain",
          "columns": [
            {
              "expression": "pass_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "chain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "chain_bindings_pass_id_passes_id_fk": {
          "name": "chain_bindings_pass_id_passes_id_fk",
          "tableFrom": "chain_bindings",
          "tableTo": "passes",
          "columnsFrom": [
            "pass_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.customers": {
      "name": "customers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "tg_user_id": {
          "name": "tg_user_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_customers_merchant": {
          "name": "ix_customers_merchant",
          "columns": [
            {
              "expression": "merchant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "ix_customers_tg": {
          "name": "ix_customers_tg",
          "columns": [
            {
              "expression": "tg_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "customers_merchant_id_merchants_id_fk": {
          "name": "customers_merchant_id_merchants_id_fk",
          "tableFrom": "customers",
          "tableTo": "merchants",
          "columnsFrom": [
            "merchant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.merchant_users": {
      "name": "merchant_users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'admin'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ux_merchant_users_merchant_email": {
          "name": "ux_merchant_users_merchant_email",
          "columns": [
            {
              "expression": "merchant_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "merchant_users_merchant_id_merchants_id_fk": {
          "name": "merchant_users_merchant_id_merchants_id_fk",
          "tableFrom": "merchant_users",
          "tableTo": "merchants",
          "columnsFrom": [
            "merchant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.merchants": {
      "name": "merchants",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(120)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "sku": {
          "name": "sku",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(20, 9)",
          "primaryKey": false,
          "notNull": true
        },
        "chain": {
          "name": "chain",
          "type": "varchar(32)",
          "primaryKey": false,
          "notNull": true
        },
        "from_address": {
          "name": "from_address",
          "type": "varchar(128)",
          "primaryKey": false,
          "notNull": false
        },
        "tg_user_id": {
          "name": "tg_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tg_username": {
          "name": "tg_username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tx": {
          "name": "tx",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "order_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'created'"
        },
        "receipt_url": {
          "name": "receipt_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "amount_nano": {
          "name": "amount_nano",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "memo": {
          "name": "memo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "to_address": {
          "name": "to_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confirmed_at": {
          "name": "confirmed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_orders_sku": {
          "name": "idx_orders_sku",
          "columns": [
            {
              "expression": "sku",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_tx": {
          "name": "idx_orders_tx",
          "columns": [
            {
              "expression": "tx",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orders_merchant_id_merchants_id_fk": {
          "name": "orders_merchant_id_merchants_id_fk",
          "tableFrom": "orders",
          "tableTo": "merchants",
          "columnsFrom": [
            "merchant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.passes": {
      "name": "passes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "merchant_id": {
          "name": "merchant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "sku": {
          "name": "sku",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "varchar(200)",
          "primaryKey": false,
          "notNull": true
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "price_nano": {
          "name": "price_nano",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "chain": {
          "name": "chain",
          "type": "varchar(16)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "passes_merchant_id_merchants_id_fk": {
          "name": "passes_merchant_id_merchants_id_fk",
          "tableFrom": "passes",
          "tableTo": "merchants",
          "columnsFrom": [
            "merchant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "passes_sku_unique": {
          "name": "passes_sku_unique",
          "nullsNotDistinct": false,
          "columns": [
            "sku"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.verification_receipts": {
      "name": "verification_receipts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "order_id": {
          "name": "order_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "sig": {
          "name": "sig",
          "type": "bytea",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "ix_verification_receipts_order": {
          "name": "ix_verification_receipts_order",
          "columns": [
            {
              "expression": "order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "verification_receipts_order_id_orders_id_fk": {
          "name": "verification_receipts_order_id_orders_id_fk",
          "tableFrom": "verification_receipts",
          "tableTo": "orders",
          "columnsFrom": [
            "order_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.order_status": {
      "name": "order_status",
      "schema": "public",
      "values": [
        "created",
        "paying",
        "paid",
        "failed"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}